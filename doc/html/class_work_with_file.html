<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SAMSUNG Test Task: WorkWithFile Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SAMSUNG Test Task
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_work_with_file-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">WorkWithFile Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_work_with_file_8h_source.html">WorkWithFile.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6a2481b2fec833b972b1db596b93e7cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_work_with_file.html#a6a2481b2fec833b972b1db596b93e7cf">WorkWithFile</a> (std::string name_file=&quot;Test.txt&quot;, uint64_t max_file_size_=5 '000 '000, bool hash=false)</td></tr>
<tr class="memdesc:a6a2481b2fec833b972b1db596b93e7cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor <a class="el" href="class_work_with_file.html">WorkWithFile</a>.  <a href="class_work_with_file.html#a6a2481b2fec833b972b1db596b93e7cf">More...</a><br /></td></tr>
<tr class="separator:a6a2481b2fec833b972b1db596b93e7cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a697f8b712aa59199e081f8294eeb2cd9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_work_with_file.html#a697f8b712aa59199e081f8294eeb2cd9">~WorkWithFile</a> ()</td></tr>
<tr class="separator:a697f8b712aa59199e081f8294eeb2cd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a636f93140cd0f29f32e1d3545b6f8053"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_work_with_file_8h.html#aa2f55816a31b4353973d92ee801a779f">open_file</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_work_with_file.html#a636f93140cd0f29f32e1d3545b6f8053">OpenFile</a> ()</td></tr>
<tr class="memdesc:a636f93140cd0f29f32e1d3545b6f8053"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if the three lengths provided could form a valid Triangle object.  <a href="class_work_with_file.html#a636f93140cd0f29f32e1d3545b6f8053">More...</a><br /></td></tr>
<tr class="separator:a636f93140cd0f29f32e1d3545b6f8053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2c8c975add0419a07af653c80508aaa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_work_with_file.html#af2c8c975add0419a07af653c80508aaa">StartHandlerReader</a> ()</td></tr>
<tr class="memdesc:af2c8c975add0419a07af653c80508aaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for reading the file when its size is changed. If the new read size differs from the previous one, then a new stream is opened with the new data and reads the latest data. It also has a flag for calculating the hash, when the flag is enabled, after changing the file size, the data hash is checked and success or error hash is output to the console.  <a href="class_work_with_file.html#af2c8c975add0419a07af653c80508aaa">More...</a><br /></td></tr>
<tr class="separator:af2c8c975add0419a07af653c80508aaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3884159176a63fa37353d07a1db4d78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_work_with_file.html#ac3884159176a63fa37353d07a1db4d78">StartHandlerWriter</a> ()</td></tr>
<tr class="memdesc:ac3884159176a63fa37353d07a1db4d78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for writing to a file, if the -crc file is disabled, then the data is written line by line to the end, if the crc flag is enabled, then the hash is calculated along with the input data from the stream and written at the beginning of the file, thereby overwriting the entire file The handler does not load the processor, as it expects from the stream through getline, the output for the handler will be the threshold file size that can be set through the object constructor, you can also set the file name through the constructor and hash calculation control.  <a href="class_work_with_file.html#ac3884159176a63fa37353d07a1db4d78">More...</a><br /></td></tr>
<tr class="separator:ac3884159176a63fa37353d07a1db4d78"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a6a2481b2fec833b972b1db596b93e7cf" name="a6a2481b2fec833b972b1db596b93e7cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a2481b2fec833b972b1db596b93e7cf">&#9670;&#160;</a></span>WorkWithFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">WorkWithFile::WorkWithFile </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>name_file</em> = <code>&quot;Test.txt&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>max_file_size_</em> = <code>5'000'000</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>hash</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor <a class="el" href="class_work_with_file.html">WorkWithFile</a>. </p>
<p >Create a new <a class="el" href="class_work_with_file.html">WorkWithFile</a> object with param. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name_file</td><td>set name file @default std::string "Test.txt" </td></tr>
    <tr><td class="paramname">max_file_size_</td><td>set max file @default uint64_t 5'000'000 bytes </td></tr>
    <tr><td class="paramname">hash</td><td>on/off hash to file @default boll false </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a697f8b712aa59199e081f8294eeb2cd9" name="a697f8b712aa59199e081f8294eeb2cd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a697f8b712aa59199e081f8294eeb2cd9">&#9670;&#160;</a></span>~WorkWithFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">WorkWithFile::~WorkWithFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a636f93140cd0f29f32e1d3545b6f8053" name="a636f93140cd0f29f32e1d3545b6f8053"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a636f93140cd0f29f32e1d3545b6f8053">&#9670;&#160;</a></span>OpenFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_work_with_file_8h.html#aa2f55816a31b4353973d92ee801a779f">open_file</a> WorkWithFile::OpenFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine if the three lengths provided could form a valid Triangle object. </p>

</div>
</div>
<a id="af2c8c975add0419a07af653c80508aaa" name="af2c8c975add0419a07af653c80508aaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2c8c975add0419a07af653c80508aaa">&#9670;&#160;</a></span>StartHandlerReader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WorkWithFile::StartHandlerReader </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handler for reading the file when its size is changed. If the new read size differs from the previous one, then a new stream is opened with the new data and reads the latest data. It also has a flag for calculating the hash, when the flag is enabled, after changing the file size, the data hash is checked and success or error hash is output to the console. </p>
<p >This method requires a refactoring for the following reasons </p><dl class="section warning"><dt>Warning</dt><dd>1. infinite loop checking file size is CPU intensive, need file change callback to silently report it </dd>
<dd>
2. if_strm.clear() should update the stream this allowed std::filesystem::file_size to use if_strm.tellg() </dd>
<dd>
3. perhaps synchronization via sockets or shared mem is needed to work with hash, since overwriting a large file may take longer and an intermediate file change during writing may give a false file change </dd></dl>
<p >todo: it will provide to detected was changed file and create callback in future, maybe -&gt;</p>
<p >Fixme: this While(true) is overload work processor</p>
<p >todo: did not work if_strm.clear();???</p>

</div>
</div>
<a id="ac3884159176a63fa37353d07a1db4d78" name="ac3884159176a63fa37353d07a1db4d78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3884159176a63fa37353d07a1db4d78">&#9670;&#160;</a></span>StartHandlerWriter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WorkWithFile::StartHandlerWriter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handler for writing to a file, if the -crc file is disabled, then the data is written line by line to the end, if the crc flag is enabled, then the hash is calculated along with the input data from the stream and written at the beginning of the file, thereby overwriting the entire file The handler does not load the processor, as it expects from the stream through getline, the output for the handler will be the threshold file size that can be set through the object constructor, you can also set the file name through the constructor and hash calculation control. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/Users/igorgusakov/project_/test_Samsung/<a class="el" href="_work_with_file_8h_source.html">WorkWithFile.h</a></li>
<li>/Users/igorgusakov/project_/test_Samsung/<a class="el" href="_work_with_file_8cpp.html">WorkWithFile.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
